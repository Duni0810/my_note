---
title: 乐联网使用说明
tags: 乐联网,网络,物联网,young
grammar_abbr: true
grammar_table: true
grammar_defList: true
grammar_emoji: true
grammar_footnote: true
grammar_ins: true
grammar_mark: true
grammar_sub: true
grammar_sup: true
grammar_checkbox: true
grammar_mathjax: true
grammar_flow: true
grammar_sequence: true
grammar_plot: true
grammar_code: true
grammar_highlight: true
grammar_html: true
grammar_linkify: true
grammar_typographer: true
grammar_video: true
grammar_audio: true
grammar_attachment: true
grammar_mermaid: true
grammar_classy: true
grammar_cjkEmphasis: true
grammar_cjkRuby: true
grammar_center: true
grammar_align: true
grammar_tableExtra: true
---

-> 目录 <-

[toc]

# 1.网址

[乐联网](https://www.lewei50.com/)
https://www.lewei50.com/
# 2. 基本信息配置
 进入网站后先注册一个账号。这里就不做细说明，注册一个信息也就==1min==的时间，快的很。 注册完之后，我们要设置一些设备和传感器的基本信息，例如设备号，传感器上传的数据单位什么的。如下图配置：
 
->![设备配置](./images/confg_2.jpg)<-

这里的设备标识在写socket会用到。
配置完设备还有传感器信息需要配置，点击左侧的”传感器与控制器“栏目，添加一些传感器信息即可，如下：

->![传感器配置](./images/sensor_config.jpg)<-

->![传感器列表](./images/sensor_list.jpg)<-

这里还需要配置一个==userkey==,在用户信息中，如下图：

->![用户信息配置](./images/user_comfig.jpg)<-

这里差不多就配置这些东西，接下来讲解下乐联网的长连接方法的实现和代码的仿真。
# 3.发送用户网关数据到TCP服务器
之前说过要连接别的网络得有公网iP和网关等信息才能建立链接，下面是乐联网的公网的一些基本信息：
公网IP：tcp.lewei50.com（==101.37.32.173 #afc131==）
端口   ： 9960

我们给服务器发数据的数据格式是json格式，但是C中没有这个，这个我们在写代码的时候在说怎么解决这个问题。
如果你想链接乐联网，就得给服务器发送用户信息。格式如下：

``` javascript	
{

    "method": ">>==update==<<",

    "gatewayNo": "你的网关号",

    "userkey": "你的userkey"

}>>==&^!==<<
```
_*method固定为==update==；TCP服务器对于==1min==之内未发送数据的客户端主动断开，所以请保证定时间隔小于==1min==；必须发送该数据才能让TCP服务器识别出用户身份，才能进行下一步的上传数据，每次重新连接都需要重新发送该数据，这里设置的网关号是之前设置的设备标识，我设置的是==02==。*_

 - 如果只想反向控制，仅需要定时发送网关数据，并及时响应服务器发来的各种请求即可。
 - 如果需要上传测量设备数据，需要在首次连接时发送网关数据，然后定时上传测量设备数据。
 - 发送和接收都以&^!为结束符来判断是否完整包。

# 4.通过TCP长连接上传数据

``` javascript
{

    "method": ">>==upload==<<",

    "data":[

    {

        "Name":"T1",

        "Value":"1"

    },
	
    {

        "Name":"01H1",

        "Value":"96.2"

    }

]

}>>==&^!==<<
```
method固定为upload，







https://www.lewei50.com/dev/doc/155
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		




