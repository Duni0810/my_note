---
title: 柔性数据和可复用的静态链表实现
tags: young
grammar_abbr: true
grammar_table: true
grammar_defList: true
grammar_emoji: true
grammar_footnote: true
grammar_ins: true
grammar_mark: true
grammar_sub: true
grammar_sup: true
grammar_checkbox: true
grammar_mathjax: true
grammar_flow: true
grammar_sequence: true
grammar_plot: true
grammar_code: true
grammar_highlight: true
grammar_html: true
grammar_linkify: true
grammar_typographer: true
grammar_video: true
grammar_audio: true
grammar_attachment: true
grammar_mermaid: true
grammar_classy: true
grammar_cjkEmphasis: true
grammar_cjkRuby: true
grammar_center: true
grammar_align: true
grammar_tableExtra: true
---
==文档制作工具：小书匠（markdown工具）==
==制作人     ：young==
==制作时间：2018-9-15==


----------

这篇文章我们来讲解下什么柔性数组，具体的应用是什么和还有静态链表的实现。

# 1. 柔性数组

我们先来说说什么是柔性数组。

柔性数组
 : 结构中**最后一个元素**允许是未知大小的数组，这个数组就是柔性数组。
 直接给一个实例定义看看是啥玩意儿：
 

``` c
typedef struct soft_array
{
    int len;
    int array[]; // 柔性数组
} soft_array_t;
```

 换句话说，实际上柔性数组是一个不定长的数值，也就是我们常说的不完整类型，如果我们直接定义的话，编译报错，但是我们赋值的话，不会报错。如下:
 
``` C 
 a[];  // 编译报错
 a1[] = "young test!"; //编译成功
```
上面说到柔性数组的一个不定长的数值，那他在程序中的内存是什么分布的呢？下面我们写一段代码测试一下柔性数组在内存中的表示：

``` c
#include <stdio.h>

typedef struct soft_array {
    int len;
    int array[]; // 柔性数组
} soft_array_t; 

int main()
{
    soft_array_t test;
    printf("size of struct:%ld \r\n", sizeof(test));
    return 0;
}
```
![柔性数值测试输出结果](./images/柔性数组.JPG)

我们可以看到输出的结果为4字节，只有一个int的大小，并没有柔性数组的大小。我们知道指是会占用一个指针大小的空间的，但是柔性数值只会占用一个占位符号，不占用任何的空间。
这里我们可以再写一个实例，看下既然是不定长的数组，那我们应该怎么使用他呢？看下面的代码：

``` c


```